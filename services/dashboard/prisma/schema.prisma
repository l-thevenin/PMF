// This is your Prisma schema file
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Strategy {
  id          String      @id @default(uuid())
  createdAt   DateTime    @default(now())
  symbol      String
  timeframe   String
  parameters  Json
  confidence  Float
  trades      Trade[]
}

model Trade {
  id                String    @id @default(uuid())
  createdAt         DateTime  @default(now())
  strategyId        String
  symbol            String
  type              String    // BUY or SELL
  price             Float
  quantity          Float
  status            String    // PENDING, EXECUTED, FAILED, SOLD, SELL_FAILED
  executionPrice    Float?
  sellPrice         Float?
  sellTime          DateTime? // Heure exacte de la vente
  sellReason        String?   // STOP_LOSS, TAKE_PROFIT, TIME_LIMIT
  profit            Float?
  holdingStartTime  DateTime?
  strategy          Strategy  @relation(fields: [strategyId], references: [id])
}
